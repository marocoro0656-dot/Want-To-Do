{# templates/user/password_change.html #}
{% extends 'todo/base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'todo/home.css' %}">
{% endblock %}
{% block body_class %}signup-page{% endblock %}

{% block content %}
  <h3 style="text-align:center; margin-bottom:16px;">パスワード変更</h3>

  <section class="signup-card">

    {# 画面上部：フォーム全体のエラー #}
    {% if form.non_field_errors %}
      <div class="alert alert-danger">
        {% for err in form.non_field_errors %}
          {{ err }}<br>
        {% endfor %}
      </div>
    {% endif %}

    <form method="post" class="signup-form" novalidate>
      {% csrf_token %}

      <label class="signup-label" for="{{ form.old_password.id_for_label }}">現在のパスワード</label>
      {% for err in form.old_password.errors %}<div class="signup-help" style="color:#d33">{{ err }}</div>{% endfor %}
      {{ form.old_password }}  {# ← フォーム側で class 付与済み #}

      <label class="signup-label" for="{{ form.new_password1.id_for_label }}">新しいパスワード</label>
      {% for err in form.new_password1.errors %}<div class="signup-help" style="color:#d33">{{ err }}</div>{% endfor %}
      {{ form.new_password1 }}
      <div class="signup-help">※半角英数字を含む、8文字以上24文字以内／記号( ! _ % @ # $ & )を1つ以上</div>

      <label class="signup-label" for="{{ form.new_password2.id_for_label }}">新しいパスワード（確認）</label>
      {% for err in form.new_password2.errors %}<div class="signup-help" style="color:#d33">{{ err }}</div>{% endfor %}
      {{ form.new_password2 }}

      <button class="signup-submit" type="submit">変更</button>
    </form>
  </section>
{% endblock %}
